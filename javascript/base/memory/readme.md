# JS的内存机制

## 相关数据结构

### 栈数据结构

栈的结构是先进后出。

![stack](./assets/stack.png)

### 推数据结构

堆的结构是一种树状结构。

### 队列

队列的结构是先进先出。

![queue](./assets/queue.png)

## 变量的存放

在JS中共有9中数据类型: `String`, `Number`, `Boolean`, `Undefined`, `Symbol`, `BitInt`, `Null`, `Object`, `Function`。其中，基本数据类型有7中：`String`, `Number`, `Boolean`, `Undefined`, `Symbol`, `BitInt`, `Null`；引用类型有2中：`Object`, `Function`。

对于基本类型是保存在栈内存中，因为这些类型在内存中是有固定大小的空间的，可通过按值访问。

对于引用类型是保存在堆内存中，因为引用类型在内存中的大小是不固定的，不能保存在栈内存中，但它们的内存地址是固定的。因此引用类型会保存在堆内存中，而其内存地址会保存在栈内容中，通过访问内存地址即可访问到对应的引用类型数据。

## 内存空间管理

JS的内存生命周期是：

1. 分配所需的内存空间
2. 使用分配到的内容空间
3. 在不需要时将内存空间释放归还

JS的内存空间可分为：栈、堆和池（也是一种栈结构）。栈用于存放变量，堆存放复杂对象，池用于存放常量（所以也叫常量池）。